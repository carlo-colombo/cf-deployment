# Remove cf-networking db password variables
- type: remove
  path: /variables/name=cf_mysql_mysql_seeded_databases_network_policy_password
- type: remove
  path: /variables/name=cf_mysql_mysql_seeded_databases_network_connectivity_password

# Remove cf-networking mysql seeded_databases
- type: remove
  path: /instance_groups/name=mysql/jobs/name=mysql/properties/cf_mysql/mysql/seeded_databases/name=network_policy?
- type: remove
  path: /instance_groups/name=mysql/jobs/name=mysql/properties/cf_mysql/mysql/seeded_databases/name=network_connectivity?

# Replace cf-networking properties with external db properties from vars file
- type: replace
  path: /instance_groups/name=api/jobs/name=policy-server/properties/cf_networking/policy_server/database/type
  value: ((policy_server_db_type))
- type: replace
  path: /instance_groups/name=api/jobs/name=policy-server/properties/cf_networking/policy_server/database/username
  value: ((policy_server_db_username))
- type: replace
  path: /instance_groups/name=api/jobs/name=policy-server/properties/cf_networking/policy_server/database/password
  value: ((policy_server_db_password))
- type: replace
  path: /instance_groups/name=api/jobs/name=policy-server/properties/cf_networking/policy_server/database/host
  value: ((policy_server_db_address))
- type: replace
  path: /instance_groups/name=api/jobs/name=policy-server/properties/cf_networking/policy_server/database/port
  value: ((policy_server_db_port))
- type: replace
  path: /instance_groups/name=api/jobs/name=policy-server/properties/cf_networking/policy_server/database/name
  value: ((policy_server_db_name))

- type: replace
  path: /instance_groups/name=diego-bbs/jobs/name=silk-controller/properties/cf_networking/silk_controller/database/type
  value: ((silk_controller_db_type))
- type: replace
  path: /instance_groups/name=diego-bbs/jobs/name=silk-controller/properties/cf_networking/silk_controller/database/username
  value: ((silk_controller_db_username))
- type: replace
  path: /instance_groups/name=diego-bbs/jobs/name=silk-controller/properties/cf_networking/silk_controller/database/password
  value: ((silk_controller_db_password))
- type: replace
  path: /instance_groups/name=diego-bbs/jobs/name=silk-controller/properties/cf_networking/silk_controller/database/host
  value: ((silk_controller_db_address))
- type: replace
  path: /instance_groups/name=diego-bbs/jobs/name=silk-controller/properties/cf_networking/silk_controller/database/port
  value: ((silk_controller_db_port))
- type: replace
  path: /instance_groups/name=diego-bbs/jobs/name=silk-controller/properties/cf_networking/silk_controller/database/name
  value: ((silk_controller_db_name))

# Nil out DB links
- type: replace
  path: /instance_groups/name=diego-bbs/jobs/name=silk-controller/consumes/database?
  value: nil
- type: replace
  path: /instance_groups/name=api/jobs/name=policy-server/consumes/database?
  value: nil
